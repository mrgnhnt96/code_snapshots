{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Code Snapshot Configuration",
  "description": "Configuration schema for the code snapshot generator",
  "type": "object",
  "properties": {
    "input": {
      "type": "object",
      "description": "Input file and line range configuration",
      "required": ["file", "startLine", "endLine"],
      "properties": {
        "file": {
          "type": "string",
          "description": "Path to the Dart file to generate a snapshot from",
          "pattern": ".*\\.dart$",
          "examples": ["./example.dart", "./src/main.dart"]
        },
        "startLine": {
          "type": "integer",
          "description": "Starting line number (inclusive, 1-based)",
          "minimum": 1,
          "examples": [1, 37]
        },
        "endLine": {
          "type": "integer",
          "description": "Ending line number (inclusive, 1-based)",
          "minimum": 1,
          "examples": [10, 46]
        },
        "lints": {
          "type": "array",
          "description": "List of lints to highlight in the code",
          "items": {
            "type": "object",
            "properties": {
              "start": {
                "type": "object",
                "properties": {
                  "line": {
                    "type": "integer",
                    "description": "Starting line number (1-based)",
                    "minimum": 1
                  },
                  "char": {
                    "type": "integer",
                    "description": "Starting character position (1-based)",
                    "minimum": 1
                  }
                },
                "required": ["line", "char"],
                "additionalProperties": false
              },
              "end": {
                "type": "object",
                "properties": {
                  "line": {
                    "type": "integer",
                    "description": "Ending line number (1-based)",
                    "minimum": 1
                  },
                  "char": {
                    "type": "integer",
                    "description": "Ending character position (1-based)",
                    "minimum": 1
                  }
                },
                "required": ["line", "char"],
                "additionalProperties": false
              },
              "type": {
                "type": "string",
                "enum": ["warning", "info", "error"],
                "description": "Type of lint"
              },
              "message": {
                "type": "string",
                "description": "Optional lint message"
              }
            },
            "required": ["start", "end", "type"],
            "additionalProperties": false
          },
          "examples": [
            [
              {
                "start": { "line": 3, "char": 5 },
                "end": { "line": 3, "char": 12 },
                "type": "warning",
                "message": "Unused variable"
              }
            ]
          ]
        }
      },
      "additionalProperties": false
    },
    "output": {
      "type": "object",
      "description": "Output image configuration",
      "required": ["path"],
      "properties": {
        "path": {
          "type": "string",
          "description": "Output file path for the generated PNG image",
          "pattern": ".*\\.png$",
          "examples": ["./code-snapshot.png", "./output/my-snapshot.png"]
        },
        "width": {
          "type": ["integer", "null"],
          "description": "Image width in pixels (null/undefined = auto-size to content)",
          "minimum": 200,
          "maximum": 2000,
          "default": 800,
          "examples": [600, 800, 1200, null]
        },
        "height": {
          "type": ["integer", "null"],
          "description": "Image height in pixels (null/undefined = auto-size to content)",
          "minimum": 200,
          "maximum": 2000,
          "default": 600,
          "examples": [400, 600, 800, null]
        }
      },
      "additionalProperties": false
    },
    "styling": {
      "type": "object",
      "description": "Visual styling configuration",
      "properties": {
        "cardTransparency": {
          "type": "number",
          "description": "Card transparency level (0.0 = fully transparent, 1.0 = fully opaque)",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.8,
          "examples": [0.6, 0.8, 0.9]
        },
        "background": {
          "type": "object",
          "description": "Background configuration for the image",
          "oneOf": [
            {
              "type": "object",
              "description": "Filled background with solid color",
              "required": ["type", "color"],
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["filled"],
                  "description": "Background type - filled"
                },
                "color": {
                  "type": "string",
                  "description": "Background color (hex format)",
                  "pattern": "^#[0-9A-Fa-f]{6}$",
                  "examples": ["#1e3a8a", "#000000", "#ffffff"]
                }
              },
              "additionalProperties": false
            },
            {
              "type": "object",
              "description": "Transparent background",
              "required": ["type"],
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["transparent"],
                  "description": "Background type - transparent"
                }
              },
              "additionalProperties": false
            },
            {
              "type": "object",
              "description": "Gradient background with color stops",
              "required": ["type", "colors"],
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["gradient"],
                  "description": "Background type - gradient"
                },
                "colors": {
                  "type": "array",
                  "description": "Array of color stops for gradient",
                  "items": {
                    "type": "object",
                    "required": ["color", "stop"],
                    "properties": {
                      "color": {
                        "type": "string",
                        "description": "Color value (hex format)",
                        "pattern": "^#[0-9A-Fa-f]{6}$",
                        "examples": ["#1e3a8a", "#3b82f6", "#ffffff"]
                      },
                      "stop": {
                        "type": "number",
                        "description": "Stop position (0.0 to 1.0)",
                        "minimum": 0.0,
                        "maximum": 1.0,
                        "examples": [0.0, 0.5, 1.0]
                      }
                    },
                    "additionalProperties": false
                  },
                  "minItems": 1,
                  "examples": [
                    [
                      { "color": "#1e3a8a", "stop": 0.0 },
                      { "color": "#3b82f6", "stop": 0.5 },
                      { "color": "#1e3a8a", "stop": 1.0 }
                    ]
                  ]
                }
              },
              "additionalProperties": false
            }
          ]
        },
        "showLineNumbers": {
          "type": "boolean",
          "description": "Show line numbers on the left side of the code",
          "default": true,
          "examples": [true, false]
        },
        "showLintMessages": {
          "type": "boolean",
          "description": "Show lint messages as tooltips or callouts",
          "default": false,
          "examples": [true, false]
        },
        "fileName": {
          "type": ["string", "null"],
          "description": "File name to display in the header. Set to null or omit to hide the file name",
          "examples": ["index.dart", "main.dart", null]
        },
        "fileIcon": {
          "type": ["string", "null"],
          "description": "Path to custom icon file to display next to the file name. Set to null or omit to use default icon",
          "examples": ["./assets/dart-icon.png", null]
        },
        "windowControl": {
          "type": "string",
          "description": "Style of the window control buttons",
          "enum": ["filled", "outlined", "hidden"],
          "default": "filled",
          "examples": ["filled", "outlined", "hidden"]
        },
        "cardMargin": {
          "type": "object",
          "description": "Card margin configuration around the code card",
          "properties": {
            "horizontal": {
              "type": "number",
              "description": "Minimum horizontal padding in pixels",
              "minimum": 0,
              "maximum": 200,
              "default": 40,
              "examples": [20, 40, 60, 80]
            },
            "vertical": {
              "type": "number",
              "description": "Minimum vertical padding in pixels",
              "minimum": 0,
              "maximum": 200,
              "default": 40,
              "examples": [20, 40, 60, 80]
            }
          },
          "additionalProperties": false
        },
        "borderRadius": {
          "type": "number",
          "description": "Border radius for the code card in pixels",
          "minimum": 0,
          "maximum": 50,
          "default": 15,
          "examples": [0, 8, 15, 20, 25]
        },
        "imageBorderRadius": {
          "type": "number",
          "description": "Border radius for the entire image in pixels",
          "minimum": 0,
          "maximum": 100,
          "default": 0,
          "examples": [0, 10, 20, 30, 50]
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["input", "output", "styling"],
  "additionalProperties": false,
  "examples": [
    {
      "input": {
        "file": "./example.dart",
        "startLine": 37,
        "endLine": 46
      },
      "output": {
        "path": "./code-snapshot.png",
        "width": 800,
        "height": 600
      },
      "styling": {
        "cardTransparency": 0.8,
        "backgroundColor": "#1e3a8a",
        "gradientMiddleColor": "#3b82f6",
        "showLineNumbers": true,
        "fileName": "index.dart",
        "windowControl": "filled"
      }
    }
  ]
}
